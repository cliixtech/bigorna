<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Bigorna Jobs</title>

<meta name="description" content="Bigorna web view">
<meta name="author" content="cliix inc.">

<link
  href="{{ url_for('webview.static', filename='css/bootstrap.min.css') }}"
  rel="stylesheet">
<link href="{{ url_for('webview.static', filename='css/style.css') }}"
  rel="stylesheet">

</head>
<body>
  <div class="container-fluid">
    <div class="row">
      <div class="page-header">
        <h1>
          Bigorna! <small>jobs tracker</small>
        </h1>
      </div>
      <div class="col-md-12">
        <table class="table table-striped">
          <thead class="thead-inverse">
            <tr>
              <th>Job ID</th>
              <th>Submitted by</th>
              <th>Submitted at</th>
              <th>Last update at</th>
              <th>Command</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            {% for job in jobs %}
            <tr>
              <td>{{ job.id }}</td>
              <td>{{ job.submitted_by }}</td>
              <td>{{ job.submitted_at | datefmt }}</td>
              <td>{{ job.last_update | datefmt }}</td>
              <td>{{ job.cmd }}</td>
              <td>{% if job.is_pending %}
                <button type="button" class="btn btn-sm" disabled>Pending</button>
                {% elif job.is_running %}
                <button type="button" class="btn btn-sm btn-warning"
                  onclick="showOutput('{{ url_for('api.job_output', _external=True, job_id=job.id) }}')">
                  Running</button> {% elif job.is_success %}
                <button type="button" class="btn btn-success btn-sm"
                  onclick="showOutput('{{ url_for('api.job_output', _external=True, job_id=job.id) }}')">
                  Success</button> {% else %}
                <button type="button" class="btn btn-danger btn-sm"
                  onclick="showOutput('{{ url_for('api.job_output', _external=True, job_id=job.id) }}');">
                  Failed</button> {% endif %}
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- output modal -->
  <div id="outputModal" class="modal fade" role="dialog">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"
            aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
          <h4 id=class="modal-title">Job output</h4>
        </div>
        <div id="outputContent" class="modal-body">No output.</div>
      </div>
    </div>
  </div>

  <script
    src="{{ url_for('webview.static', filename='js/jquery.min.js') }}"></script>
  <script
    src="{{ url_for('webview.static', filename='js/bootstrap.min.js') }}"></script>
  <script
    src="{{ url_for('webview.static', filename='js/scripts.js') }}"></script>
</body>
</html>